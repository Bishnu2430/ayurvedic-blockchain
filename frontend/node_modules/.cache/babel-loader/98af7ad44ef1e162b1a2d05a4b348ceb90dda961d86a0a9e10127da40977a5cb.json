{"ast":null,"code":"var _jsxFileName = \"/home/bishnu/ayurvedic-blockchain/frontend/src/components/QRScanner.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { Camera, Upload, X, Scan, AlertCircle } from \"lucide-react\";\nimport { useToast } from \"../contexts/ToastContext\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst QRScanner = ({\n  onScanResult,\n  onClose,\n  isOpen = false\n}) => {\n  _s();\n  const [isScanning, setIsScanning] = useState(false);\n  const [error, setError] = useState(null);\n  const [hasCamera, setHasCamera] = useState(false);\n  const videoRef = useRef(null);\n  const streamRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const toast = useToast();\n\n  // Check for camera availability\n  useEffect(() => {\n    checkCameraAvailability();\n  }, []);\n\n  // Handle modal open/close\n  useEffect(() => {\n    if (isOpen) {\n      startCamera();\n    } else {\n      stopCamera();\n    }\n    return () => stopCamera();\n  }, [isOpen]);\n  const checkCameraAvailability = async () => {\n    try {\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      const videoDevices = devices.filter(device => device.kind === \"videoinput\");\n      setHasCamera(videoDevices.length > 0);\n    } catch (error) {\n      console.error(\"Error checking camera availability:\", error);\n      setHasCamera(false);\n    }\n  };\n  const startCamera = async () => {\n    try {\n      setError(null);\n      setIsScanning(true);\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: \"environment\",\n          // Use back camera if available\n          width: {\n            ideal: 1280\n          },\n          height: {\n            ideal: 720\n          }\n        }\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        streamRef.current = stream;\n      }\n    } catch (error) {\n      console.error(\"Error starting camera:\", error);\n      setError(\"Unable to access camera. Please check permissions or try uploading an image.\");\n      setIsScanning(false);\n    }\n  };\n  const stopCamera = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    setIsScanning(false);\n  };\n  const handleFileUpload = event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = async e => {\n      try {\n        const imageData = e.target.result;\n        await processQRCode(imageData);\n      } catch (error) {\n        toast.error(\"Failed to process image\");\n      }\n    };\n    reader.readAsDataURL(file);\n  };\n  const processQRCode = async imageData => {\n    try {\n      // This is a simplified QR code processing\n      // In a real implementation, you'd use a QR code library like jsqr\n\n      // For demo purposes, we'll simulate QR code detection\n      // You would typically use: import jsQR from \"jsqr\";\n\n      // Simulate processing delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Mock QR code data - replace with actual QR detection\n      const mockQRData = {\n        herbId: \"ASH1234567890\",\n        type: \"herb_traceability\",\n        url: `${window.location.origin}/trace/ASH1234567890`\n      };\n      onScanResult(JSON.stringify(mockQRData));\n      toast.success(\"QR code scanned successfully!\");\n    } catch (error) {\n      console.error(\"QR processing error:\", error);\n      toast.error(\"Failed to read QR code from image\");\n    }\n  };\n  const captureFrame = async () => {\n    if (!videoRef.current) return;\n    try {\n      const canvas = document.createElement(\"canvas\");\n      const context = canvas.getContext(\"2d\");\n      canvas.width = videoRef.current.videoWidth;\n      canvas.height = videoRef.current.videoHeight;\n      context.drawImage(videoRef.current, 0, 0);\n      const imageData = canvas.toDataURL(\"image/jpeg\");\n      await processQRCode(imageData);\n    } catch (error) {\n      toast.error(\"Failed to capture image\");\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg max-w-md w-full max-h-full overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-4 border-b border-sage-100\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-sage-800\",\n          children: \"Scan QR Code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-sage-400 hover:text-sage-600 p-1\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 space-y-4\",\n        children: [hasCamera && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            ref: videoRef,\n            autoPlay: true,\n            playsInline: true,\n            muted: true,\n            className: \"w-full h-64 bg-black rounded-lg object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-4 border-2 border-mint-400 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 border border-dashed border-mint-300 rounded-lg animate-pulse\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-2 left-2 w-4 h-4 border-l-2 border-t-2 border-mint-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-2 right-2 w-4 h-4 border-r-2 border-t-2 border-mint-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute bottom-2 left-2 w-4 h-4 border-l-2 border-b-2 border-mint-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute bottom-2 right-2 w-4 h-4 border-r-2 border-b-2 border-mint-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this), isScanning && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute bottom-4 left-1/2 transform -translate-x-1/2\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: captureFrame,\n              className: \"bg-mint-500 text-white p-3 rounded-full hover:bg-mint-600 transition-colors shadow-lg\",\n              children: /*#__PURE__*/_jsxDEV(Camera, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-50 border border-red-200 rounded-lg p-4 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"w-8 h-8 text-red-400 mx-auto mb-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-700 text-sm\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-t border-sage-100 pt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-sage-600 mb-3 text-center\",\n            children: \"Or upload an image containing a QR code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: fileInputRef,\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: handleFileUpload,\n            className: \"hidden\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              var _fileInputRef$current;\n              return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n            },\n            className: \"w-full flex items-center justify-center space-x-2 bg-sage-100 text-sage-700 py-3 px-4 rounded-lg hover:bg-sage-200 transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(Upload, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Upload Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 rounded-lg p-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-blue-800 text-sm mb-2\",\n            children: \"How to scan:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"text-xs text-blue-700 space-y-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"\\u2022 Point your camera at the QR code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"\\u2022 Make sure the QR code is clearly visible\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"\\u2022 Tap the camera button to capture\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"\\u2022 Or upload an image with the QR code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n\n// Simple QR scanner button\n_s(QRScanner, \"0fuEMMByrDCYTaif/MyGqAIP5iw=\", false, function () {\n  return [useToast];\n});\n_c = QRScanner;\nexport const QRScannerButton = ({\n  onScanResult,\n  className = \"\"\n}) => {\n  _s2();\n  const [isOpen, setIsOpen] = useState(false);\n  const handleScanResult = result => {\n    setIsOpen(false);\n    onScanResult(result);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setIsOpen(true),\n      className: `flex items-center space-x-2 px-4 py-2 bg-mint-500 text-white rounded-lg hover:bg-mint-600 transition-colors ${className}`,\n      children: [/*#__PURE__*/_jsxDEV(Scan, {\n        className: \"w-4 h-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Scan QR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(QRScanner, {\n      isOpen: isOpen,\n      onClose: () => setIsOpen(false),\n      onScanResult: handleScanResult\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n// Inline scanner component\n_s2(QRScannerButton, \"+sus0Lb0ewKHdwiUhiTAJFoFyQ0=\");\n_c2 = QRScannerButton;\nexport const InlineQRScanner = ({\n  onScanResult,\n  height = \"h-64\"\n}) => {\n  _s3();\n  const [isScanning, setIsScanning] = useState(false);\n  const [error, setError] = useState(null);\n  const videoRef = useRef(null);\n  const streamRef = useRef(null);\n  const startScanning = async () => {\n    try {\n      setError(null);\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: \"environment\"\n        }\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        streamRef.current = stream;\n        setIsScanning(true);\n      }\n    } catch (error) {\n      setError(\"Camera access denied\");\n    }\n  };\n  const stopScanning = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    setIsScanning(false);\n  };\n  useEffect(() => {\n    return () => stopScanning();\n  }, []);\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${height} bg-red-50 rounded-lg flex items-center justify-center border border-red-200`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"w-8 h-8 text-red-400 mx-auto mb-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-600 text-sm\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this);\n  }\n  if (!isScanning) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${height} bg-sage-50 rounded-lg flex items-center justify-center border border-sage-200`,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startScanning,\n        className: \"flex flex-col items-center space-y-2 text-sage-600 hover:text-mint-600 transition-colors\",\n        children: [/*#__PURE__*/_jsxDEV(Camera, {\n          className: \"w-12 h-12\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm font-medium\",\n          children: \"Start Camera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${height} relative rounded-lg overflow-hidden bg-black`,\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      autoPlay: true,\n      playsInline: true,\n      muted: true,\n      className: \"w-full h-full object-cover\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-4 border-2 border-mint-400 rounded-lg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 border border-dashed border-mint-300 rounded-lg animate-pulse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: stopScanning,\n      className: \"absolute top-2 right-2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all\",\n      children: /*#__PURE__*/_jsxDEV(X, {\n        className: \"w-4 h-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 334,\n    columnNumber: 5\n  }, this);\n};\n_s3(InlineQRScanner, \"fiKY5hmnkzdgHwDKbv23P1lX8NI=\");\n_c3 = InlineQRScanner;\nexport default QRScanner;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"QRScanner\");\n$RefreshReg$(_c2, \"QRScannerButton\");\n$RefreshReg$(_c3, \"InlineQRScanner\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Camera","Upload","X","Scan","AlertCircle","useToast","jsxDEV","_jsxDEV","Fragment","_Fragment","QRScanner","onScanResult","onClose","isOpen","_s","isScanning","setIsScanning","error","setError","hasCamera","setHasCamera","videoRef","streamRef","fileInputRef","toast","checkCameraAvailability","startCamera","stopCamera","devices","navigator","mediaDevices","enumerateDevices","videoDevices","filter","device","kind","length","console","stream","getUserMedia","video","facingMode","width","ideal","height","current","srcObject","getTracks","forEach","track","stop","handleFileUpload","event","file","target","files","reader","FileReader","onload","e","imageData","result","processQRCode","readAsDataURL","Promise","resolve","setTimeout","mockQRData","herbId","type","url","window","location","origin","JSON","stringify","success","captureFrame","canvas","document","createElement","context","getContext","videoWidth","videoHeight","drawImage","toDataURL","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","autoPlay","playsInline","muted","accept","onChange","_fileInputRef$current","click","_c","QRScannerButton","_s2","setIsOpen","handleScanResult","_c2","InlineQRScanner","_s3","startScanning","stopScanning","_c3","$RefreshReg$"],"sources":["/home/bishnu/ayurvedic-blockchain/frontend/src/components/QRScanner.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { Camera, Upload, X, Scan, AlertCircle } from \"lucide-react\";\nimport { useToast } from \"../contexts/ToastContext\";\n\nconst QRScanner = ({ onScanResult, onClose, isOpen = false }) => {\n  const [isScanning, setIsScanning] = useState(false);\n  const [error, setError] = useState(null);\n  const [hasCamera, setHasCamera] = useState(false);\n  const videoRef = useRef(null);\n  const streamRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const toast = useToast();\n\n  // Check for camera availability\n  useEffect(() => {\n    checkCameraAvailability();\n  }, []);\n\n  // Handle modal open/close\n  useEffect(() => {\n    if (isOpen) {\n      startCamera();\n    } else {\n      stopCamera();\n    }\n\n    return () => stopCamera();\n  }, [isOpen]);\n\n  const checkCameraAvailability = async () => {\n    try {\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      const videoDevices = devices.filter(\n        (device) => device.kind === \"videoinput\"\n      );\n      setHasCamera(videoDevices.length > 0);\n    } catch (error) {\n      console.error(\"Error checking camera availability:\", error);\n      setHasCamera(false);\n    }\n  };\n\n  const startCamera = async () => {\n    try {\n      setError(null);\n      setIsScanning(true);\n\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: \"environment\", // Use back camera if available\n          width: { ideal: 1280 },\n          height: { ideal: 720 },\n        },\n      });\n\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        streamRef.current = stream;\n      }\n    } catch (error) {\n      console.error(\"Error starting camera:\", error);\n      setError(\n        \"Unable to access camera. Please check permissions or try uploading an image.\"\n      );\n      setIsScanning(false);\n    }\n  };\n\n  const stopCamera = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach((track) => track.stop());\n      streamRef.current = null;\n    }\n    setIsScanning(false);\n  };\n\n  const handleFileUpload = (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n    reader.onload = async (e) => {\n      try {\n        const imageData = e.target.result;\n        await processQRCode(imageData);\n      } catch (error) {\n        toast.error(\"Failed to process image\");\n      }\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const processQRCode = async (imageData) => {\n    try {\n      // This is a simplified QR code processing\n      // In a real implementation, you'd use a QR code library like jsqr\n\n      // For demo purposes, we'll simulate QR code detection\n      // You would typically use: import jsQR from \"jsqr\";\n\n      // Simulate processing delay\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n\n      // Mock QR code data - replace with actual QR detection\n      const mockQRData = {\n        herbId: \"ASH1234567890\",\n        type: \"herb_traceability\",\n        url: `${window.location.origin}/trace/ASH1234567890`,\n      };\n\n      onScanResult(JSON.stringify(mockQRData));\n      toast.success(\"QR code scanned successfully!\");\n    } catch (error) {\n      console.error(\"QR processing error:\", error);\n      toast.error(\"Failed to read QR code from image\");\n    }\n  };\n\n  const captureFrame = async () => {\n    if (!videoRef.current) return;\n\n    try {\n      const canvas = document.createElement(\"canvas\");\n      const context = canvas.getContext(\"2d\");\n\n      canvas.width = videoRef.current.videoWidth;\n      canvas.height = videoRef.current.videoHeight;\n\n      context.drawImage(videoRef.current, 0, 0);\n      const imageData = canvas.toDataURL(\"image/jpeg\");\n\n      await processQRCode(imageData);\n    } catch (error) {\n      toast.error(\"Failed to capture image\");\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-lg max-w-md w-full max-h-full overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b border-sage-100\">\n          <h2 className=\"text-lg font-semibold text-sage-800\">Scan QR Code</h2>\n          <button\n            onClick={onClose}\n            className=\"text-sage-400 hover:text-sage-600 p-1\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-4 space-y-4\">\n          {/* Camera View */}\n          {hasCamera && !error && (\n            <div className=\"relative\">\n              <video\n                ref={videoRef}\n                autoPlay\n                playsInline\n                muted\n                className=\"w-full h-64 bg-black rounded-lg object-cover\"\n              />\n\n              {/* Scanning overlay */}\n              <div className=\"absolute inset-4 border-2 border-mint-400 rounded-lg\">\n                <div className=\"absolute inset-0 border border-dashed border-mint-300 rounded-lg animate-pulse\">\n                  <div className=\"absolute top-2 left-2 w-4 h-4 border-l-2 border-t-2 border-mint-400\"></div>\n                  <div className=\"absolute top-2 right-2 w-4 h-4 border-r-2 border-t-2 border-mint-400\"></div>\n                  <div className=\"absolute bottom-2 left-2 w-4 h-4 border-l-2 border-b-2 border-mint-400\"></div>\n                  <div className=\"absolute bottom-2 right-2 w-4 h-4 border-r-2 border-b-2 border-mint-400\"></div>\n                </div>\n              </div>\n\n              {/* Capture button */}\n              {isScanning && (\n                <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2\">\n                  <button\n                    onClick={captureFrame}\n                    className=\"bg-mint-500 text-white p-3 rounded-full hover:bg-mint-600 transition-colors shadow-lg\"\n                  >\n                    <Camera className=\"w-6 h-6\" />\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Error state */}\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 text-center\">\n              <AlertCircle className=\"w-8 h-8 text-red-400 mx-auto mb-2\" />\n              <p className=\"text-red-700 text-sm\">{error}</p>\n            </div>\n          )}\n\n          {/* File upload option */}\n          <div className=\"border-t border-sage-100 pt-4\">\n            <p className=\"text-sm text-sage-600 mb-3 text-center\">\n              Or upload an image containing a QR code\n            </p>\n\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleFileUpload}\n              className=\"hidden\"\n            />\n\n            <button\n              onClick={() => fileInputRef.current?.click()}\n              className=\"w-full flex items-center justify-center space-x-2 bg-sage-100 text-sage-700 py-3 px-4 rounded-lg hover:bg-sage-200 transition-colors\"\n            >\n              <Upload className=\"w-4 h-4\" />\n              <span>Upload Image</span>\n            </button>\n          </div>\n\n          {/* Instructions */}\n          <div className=\"bg-blue-50 rounded-lg p-3\">\n            <h4 className=\"font-medium text-blue-800 text-sm mb-2\">\n              How to scan:\n            </h4>\n            <ul className=\"text-xs text-blue-700 space-y-1\">\n              <li>• Point your camera at the QR code</li>\n              <li>• Make sure the QR code is clearly visible</li>\n              <li>• Tap the camera button to capture</li>\n              <li>• Or upload an image with the QR code</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Simple QR scanner button\nexport const QRScannerButton = ({ onScanResult, className = \"\" }) => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleScanResult = (result) => {\n    setIsOpen(false);\n    onScanResult(result);\n  };\n\n  return (\n    <>\n      <button\n        onClick={() => setIsOpen(true)}\n        className={`flex items-center space-x-2 px-4 py-2 bg-mint-500 text-white rounded-lg hover:bg-mint-600 transition-colors ${className}`}\n      >\n        <Scan className=\"w-4 h-4\" />\n        <span>Scan QR</span>\n      </button>\n\n      <QRScanner\n        isOpen={isOpen}\n        onClose={() => setIsOpen(false)}\n        onScanResult={handleScanResult}\n      />\n    </>\n  );\n};\n\n// Inline scanner component\nexport const InlineQRScanner = ({ onScanResult, height = \"h-64\" }) => {\n  const [isScanning, setIsScanning] = useState(false);\n  const [error, setError] = useState(null);\n  const videoRef = useRef(null);\n  const streamRef = useRef(null);\n\n  const startScanning = async () => {\n    try {\n      setError(null);\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: { facingMode: \"environment\" },\n      });\n\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        streamRef.current = stream;\n        setIsScanning(true);\n      }\n    } catch (error) {\n      setError(\"Camera access denied\");\n    }\n  };\n\n  const stopScanning = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach((track) => track.stop());\n      streamRef.current = null;\n    }\n    setIsScanning(false);\n  };\n\n  useEffect(() => {\n    return () => stopScanning();\n  }, []);\n\n  if (error) {\n    return (\n      <div\n        className={`${height} bg-red-50 rounded-lg flex items-center justify-center border border-red-200`}\n      >\n        <div className=\"text-center\">\n          <AlertCircle className=\"w-8 h-8 text-red-400 mx-auto mb-2\" />\n          <p className=\"text-red-600 text-sm\">{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isScanning) {\n    return (\n      <div\n        className={`${height} bg-sage-50 rounded-lg flex items-center justify-center border border-sage-200`}\n      >\n        <button\n          onClick={startScanning}\n          className=\"flex flex-col items-center space-y-2 text-sage-600 hover:text-mint-600 transition-colors\"\n        >\n          <Camera className=\"w-12 h-12\" />\n          <span className=\"text-sm font-medium\">Start Camera</span>\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`${height} relative rounded-lg overflow-hidden bg-black`}>\n      <video\n        ref={videoRef}\n        autoPlay\n        playsInline\n        muted\n        className=\"w-full h-full object-cover\"\n      />\n\n      <div className=\"absolute inset-4 border-2 border-mint-400 rounded-lg\">\n        <div className=\"absolute inset-0 border border-dashed border-mint-300 rounded-lg animate-pulse\"></div>\n      </div>\n\n      <button\n        onClick={stopScanning}\n        className=\"absolute top-2 right-2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all\"\n      >\n        <X className=\"w-4 h-4\" />\n      </button>\n    </div>\n  );\n};\n\nexport default QRScanner;\n"],"mappings":";;;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SAASC,MAAM,EAAEC,MAAM,EAAEC,CAAC,EAAEC,IAAI,EAAEC,WAAW,QAAQ,cAAc;AACnE,SAASC,QAAQ,QAAQ,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEpD,MAAMC,SAAS,GAAGA,CAAC;EAAEC,YAAY;EAAEC,OAAO;EAAEC,MAAM,GAAG;AAAM,CAAC,KAAK;EAAAC,EAAA;EAC/D,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACoB,KAAK,EAAEC,QAAQ,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACsB,SAAS,EAAEC,YAAY,CAAC,GAAGvB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAMwB,QAAQ,GAAGvB,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMwB,SAAS,GAAGxB,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAMyB,YAAY,GAAGzB,MAAM,CAAC,IAAI,CAAC;EACjC,MAAM0B,KAAK,GAAGnB,QAAQ,CAAC,CAAC;;EAExB;EACAN,SAAS,CAAC,MAAM;IACd0B,uBAAuB,CAAC,CAAC;EAC3B,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA1B,SAAS,CAAC,MAAM;IACd,IAAIc,MAAM,EAAE;MACVa,WAAW,CAAC,CAAC;IACf,CAAC,MAAM;MACLC,UAAU,CAAC,CAAC;IACd;IAEA,OAAO,MAAMA,UAAU,CAAC,CAAC;EAC3B,CAAC,EAAE,CAACd,MAAM,CAAC,CAAC;EAEZ,MAAMY,uBAAuB,GAAG,MAAAA,CAAA,KAAY;IAC1C,IAAI;MACF,MAAMG,OAAO,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,gBAAgB,CAAC,CAAC;MAC/D,MAAMC,YAAY,GAAGJ,OAAO,CAACK,MAAM,CAChCC,MAAM,IAAKA,MAAM,CAACC,IAAI,KAAK,YAC9B,CAAC;MACDf,YAAY,CAACY,YAAY,CAACI,MAAM,GAAG,CAAC,CAAC;IACvC,CAAC,CAAC,OAAOnB,KAAK,EAAE;MACdoB,OAAO,CAACpB,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;MAC3DG,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMM,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI;MACFR,QAAQ,CAAC,IAAI,CAAC;MACdF,aAAa,CAAC,IAAI,CAAC;MAEnB,MAAMsB,MAAM,GAAG,MAAMT,SAAS,CAACC,YAAY,CAACS,YAAY,CAAC;QACvDC,KAAK,EAAE;UACLC,UAAU,EAAE,aAAa;UAAE;UAC3BC,KAAK,EAAE;YAAEC,KAAK,EAAE;UAAK,CAAC;UACtBC,MAAM,EAAE;YAAED,KAAK,EAAE;UAAI;QACvB;MACF,CAAC,CAAC;MAEF,IAAItB,QAAQ,CAACwB,OAAO,EAAE;QACpBxB,QAAQ,CAACwB,OAAO,CAACC,SAAS,GAAGR,MAAM;QACnChB,SAAS,CAACuB,OAAO,GAAGP,MAAM;MAC5B;IACF,CAAC,CAAC,OAAOrB,KAAK,EAAE;MACdoB,OAAO,CAACpB,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9CC,QAAQ,CACN,8EACF,CAAC;MACDF,aAAa,CAAC,KAAK,CAAC;IACtB;EACF,CAAC;EAED,MAAMW,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAIL,SAAS,CAACuB,OAAO,EAAE;MACrBvB,SAAS,CAACuB,OAAO,CAACE,SAAS,CAAC,CAAC,CAACC,OAAO,CAAEC,KAAK,IAAKA,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC;MAC9D5B,SAAS,CAACuB,OAAO,GAAG,IAAI;IAC1B;IACA7B,aAAa,CAAC,KAAK,CAAC;EACtB,CAAC;EAED,MAAMmC,gBAAgB,GAAIC,KAAK,IAAK;IAClC,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAI,CAACF,IAAI,EAAE;IAEX,MAAMG,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;IAC/BD,MAAM,CAACE,MAAM,GAAG,MAAOC,CAAC,IAAK;MAC3B,IAAI;QACF,MAAMC,SAAS,GAAGD,CAAC,CAACL,MAAM,CAACO,MAAM;QACjC,MAAMC,aAAa,CAACF,SAAS,CAAC;MAChC,CAAC,CAAC,OAAO3C,KAAK,EAAE;QACdO,KAAK,CAACP,KAAK,CAAC,yBAAyB,CAAC;MACxC;IACF,CAAC;IACDuC,MAAM,CAACO,aAAa,CAACV,IAAI,CAAC;EAC5B,CAAC;EAED,MAAMS,aAAa,GAAG,MAAOF,SAAS,IAAK;IACzC,IAAI;MACF;MACA;;MAEA;MACA;;MAEA;MACA,MAAM,IAAII,OAAO,CAAEC,OAAO,IAAKC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC,CAAC;;MAEzD;MACA,MAAME,UAAU,GAAG;QACjBC,MAAM,EAAE,eAAe;QACvBC,IAAI,EAAE,mBAAmB;QACzBC,GAAG,EAAE,GAAGC,MAAM,CAACC,QAAQ,CAACC,MAAM;MAChC,CAAC;MAED9D,YAAY,CAAC+D,IAAI,CAACC,SAAS,CAACR,UAAU,CAAC,CAAC;MACxC3C,KAAK,CAACoD,OAAO,CAAC,+BAA+B,CAAC;IAChD,CAAC,CAAC,OAAO3D,KAAK,EAAE;MACdoB,OAAO,CAACpB,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CO,KAAK,CAACP,KAAK,CAAC,mCAAmC,CAAC;IAClD;EACF,CAAC;EAED,MAAM4D,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAACxD,QAAQ,CAACwB,OAAO,EAAE;IAEvB,IAAI;MACF,MAAMiC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/C,MAAMC,OAAO,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;MAEvCJ,MAAM,CAACpC,KAAK,GAAGrB,QAAQ,CAACwB,OAAO,CAACsC,UAAU;MAC1CL,MAAM,CAAClC,MAAM,GAAGvB,QAAQ,CAACwB,OAAO,CAACuC,WAAW;MAE5CH,OAAO,CAACI,SAAS,CAAChE,QAAQ,CAACwB,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;MACzC,MAAMe,SAAS,GAAGkB,MAAM,CAACQ,SAAS,CAAC,YAAY,CAAC;MAEhD,MAAMxB,aAAa,CAACF,SAAS,CAAC;IAChC,CAAC,CAAC,OAAO3C,KAAK,EAAE;MACdO,KAAK,CAACP,KAAK,CAAC,yBAAyB,CAAC;IACxC;EACF,CAAC;EAED,IAAI,CAACJ,MAAM,EAAE,OAAO,IAAI;EAExB,oBACEN,OAAA;IAAKgF,SAAS,EAAC,gFAAgF;IAAAC,QAAA,eAC7FjF,OAAA;MAAKgF,SAAS,EAAC,gEAAgE;MAAAC,QAAA,gBAE7EjF,OAAA;QAAKgF,SAAS,EAAC,gEAAgE;QAAAC,QAAA,gBAC7EjF,OAAA;UAAIgF,SAAS,EAAC,qCAAqC;UAAAC,QAAA,EAAC;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACrErF,OAAA;UACEsF,OAAO,EAAEjF,OAAQ;UACjB2E,SAAS,EAAC,uCAAuC;UAAAC,QAAA,eAEjDjF,OAAA,CAACL,CAAC;YAACqF,SAAS,EAAC;UAAS;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAGNrF,OAAA;QAAKgF,SAAS,EAAC,eAAe;QAAAC,QAAA,GAE3BrE,SAAS,IAAI,CAACF,KAAK,iBAClBV,OAAA;UAAKgF,SAAS,EAAC,UAAU;UAAAC,QAAA,gBACvBjF,OAAA;YACEuF,GAAG,EAAEzE,QAAS;YACd0E,QAAQ;YACRC,WAAW;YACXC,KAAK;YACLV,SAAS,EAAC;UAA8C;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzD,CAAC,eAGFrF,OAAA;YAAKgF,SAAS,EAAC,sDAAsD;YAAAC,QAAA,eACnEjF,OAAA;cAAKgF,SAAS,EAAC,gFAAgF;cAAAC,QAAA,gBAC7FjF,OAAA;gBAAKgF,SAAS,EAAC;cAAqE;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAC3FrF,OAAA;gBAAKgF,SAAS,EAAC;cAAsE;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAC5FrF,OAAA;gBAAKgF,SAAS,EAAC;cAAwE;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAC9FrF,OAAA;gBAAKgF,SAAS,EAAC;cAAyE;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5F;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,EAGL7E,UAAU,iBACTR,OAAA;YAAKgF,SAAS,EAAC,uDAAuD;YAAAC,QAAA,eACpEjF,OAAA;cACEsF,OAAO,EAAEhB,YAAa;cACtBU,SAAS,EAAC,uFAAuF;cAAAC,QAAA,eAEjGjF,OAAA,CAACP,MAAM;gBAACuF,SAAS,EAAC;cAAS;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxB;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CACN,EAGA3E,KAAK,iBACJV,OAAA;UAAKgF,SAAS,EAAC,4DAA4D;UAAAC,QAAA,gBACzEjF,OAAA,CAACH,WAAW;YAACmF,SAAS,EAAC;UAAmC;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC7DrF,OAAA;YAAGgF,SAAS,EAAC,sBAAsB;YAAAC,QAAA,EAAEvE;UAAK;YAAAwE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5C,CACN,eAGDrF,OAAA;UAAKgF,SAAS,EAAC,+BAA+B;UAAAC,QAAA,gBAC5CjF,OAAA;YAAGgF,SAAS,EAAC,wCAAwC;YAAAC,QAAA,EAAC;UAEtD;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAEJrF,OAAA;YACEuF,GAAG,EAAEvE,YAAa;YAClB8C,IAAI,EAAC,MAAM;YACX6B,MAAM,EAAC,SAAS;YAChBC,QAAQ,EAAEhD,gBAAiB;YAC3BoC,SAAS,EAAC;UAAQ;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnB,CAAC,eAEFrF,OAAA;YACEsF,OAAO,EAAEA,CAAA;cAAA,IAAAO,qBAAA;cAAA,QAAAA,qBAAA,GAAM7E,YAAY,CAACsB,OAAO,cAAAuD,qBAAA,uBAApBA,qBAAA,CAAsBC,KAAK,CAAC,CAAC;YAAA,CAAC;YAC7Cd,SAAS,EAAC,sIAAsI;YAAAC,QAAA,gBAEhJjF,OAAA,CAACN,MAAM;cAACsF,SAAS,EAAC;YAAS;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAC9BrF,OAAA;cAAAiF,QAAA,EAAM;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eAGNrF,OAAA;UAAKgF,SAAS,EAAC,2BAA2B;UAAAC,QAAA,gBACxCjF,OAAA;YAAIgF,SAAS,EAAC,wCAAwC;YAAAC,QAAA,EAAC;UAEvD;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACLrF,OAAA;YAAIgF,SAAS,EAAC,iCAAiC;YAAAC,QAAA,gBAC7CjF,OAAA;cAAAiF,QAAA,EAAI;YAAkC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC3CrF,OAAA;cAAAiF,QAAA,EAAI;YAA0C;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACnDrF,OAAA;cAAAiF,QAAA,EAAI;YAAkC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC3CrF,OAAA;cAAAiF,QAAA,EAAI;YAAqC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;;AAED;AAAA9E,EAAA,CA3OMJ,SAAS;EAAA,QAOCL,QAAQ;AAAA;AAAAiG,EAAA,GAPlB5F,SAAS;AA4Of,OAAO,MAAM6F,eAAe,GAAGA,CAAC;EAAE5F,YAAY;EAAE4E,SAAS,GAAG;AAAG,CAAC,KAAK;EAAAiB,GAAA;EACnE,MAAM,CAAC3F,MAAM,EAAE4F,SAAS,CAAC,GAAG5G,QAAQ,CAAC,KAAK,CAAC;EAE3C,MAAM6G,gBAAgB,GAAI7C,MAAM,IAAK;IACnC4C,SAAS,CAAC,KAAK,CAAC;IAChB9F,YAAY,CAACkD,MAAM,CAAC;EACtB,CAAC;EAED,oBACEtD,OAAA,CAAAE,SAAA;IAAA+E,QAAA,gBACEjF,OAAA;MACEsF,OAAO,EAAEA,CAAA,KAAMY,SAAS,CAAC,IAAI,CAAE;MAC/BlB,SAAS,EAAE,+GAA+GA,SAAS,EAAG;MAAAC,QAAA,gBAEtIjF,OAAA,CAACJ,IAAI;QAACoF,SAAS,EAAC;MAAS;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC5BrF,OAAA;QAAAiF,QAAA,EAAM;MAAO;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACd,CAAC,eAETrF,OAAA,CAACG,SAAS;MACRG,MAAM,EAAEA,MAAO;MACfD,OAAO,EAAEA,CAAA,KAAM6F,SAAS,CAAC,KAAK,CAAE;MAChC9F,YAAY,EAAE+F;IAAiB;MAAAjB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChC,CAAC;EAAA,eACF,CAAC;AAEP,CAAC;;AAED;AAAAY,GAAA,CA3BaD,eAAe;AAAAI,GAAA,GAAfJ,eAAe;AA4B5B,OAAO,MAAMK,eAAe,GAAGA,CAAC;EAAEjG,YAAY;EAAEiC,MAAM,GAAG;AAAO,CAAC,KAAK;EAAAiE,GAAA;EACpE,MAAM,CAAC9F,UAAU,EAAEC,aAAa,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACoB,KAAK,EAAEC,QAAQ,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAMwB,QAAQ,GAAGvB,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMwB,SAAS,GAAGxB,MAAM,CAAC,IAAI,CAAC;EAE9B,MAAMgH,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACF5F,QAAQ,CAAC,IAAI,CAAC;MACd,MAAMoB,MAAM,GAAG,MAAMT,SAAS,CAACC,YAAY,CAACS,YAAY,CAAC;QACvDC,KAAK,EAAE;UAAEC,UAAU,EAAE;QAAc;MACrC,CAAC,CAAC;MAEF,IAAIpB,QAAQ,CAACwB,OAAO,EAAE;QACpBxB,QAAQ,CAACwB,OAAO,CAACC,SAAS,GAAGR,MAAM;QACnChB,SAAS,CAACuB,OAAO,GAAGP,MAAM;QAC1BtB,aAAa,CAAC,IAAI,CAAC;MACrB;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,QAAQ,CAAC,sBAAsB,CAAC;IAClC;EACF,CAAC;EAED,MAAM6F,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAIzF,SAAS,CAACuB,OAAO,EAAE;MACrBvB,SAAS,CAACuB,OAAO,CAACE,SAAS,CAAC,CAAC,CAACC,OAAO,CAAEC,KAAK,IAAKA,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC;MAC9D5B,SAAS,CAACuB,OAAO,GAAG,IAAI;IAC1B;IACA7B,aAAa,CAAC,KAAK,CAAC;EACtB,CAAC;EAEDjB,SAAS,CAAC,MAAM;IACd,OAAO,MAAMgH,YAAY,CAAC,CAAC;EAC7B,CAAC,EAAE,EAAE,CAAC;EAEN,IAAI9F,KAAK,EAAE;IACT,oBACEV,OAAA;MACEgF,SAAS,EAAE,GAAG3C,MAAM,8EAA+E;MAAA4C,QAAA,eAEnGjF,OAAA;QAAKgF,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1BjF,OAAA,CAACH,WAAW;UAACmF,SAAS,EAAC;QAAmC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAC7DrF,OAAA;UAAGgF,SAAS,EAAC,sBAAsB;UAAAC,QAAA,EAAEvE;QAAK;UAAAwE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5C;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,IAAI,CAAC7E,UAAU,EAAE;IACf,oBACER,OAAA;MACEgF,SAAS,EAAE,GAAG3C,MAAM,gFAAiF;MAAA4C,QAAA,eAErGjF,OAAA;QACEsF,OAAO,EAAEiB,aAAc;QACvBvB,SAAS,EAAC,0FAA0F;QAAAC,QAAA,gBAEpGjF,OAAA,CAACP,MAAM;UAACuF,SAAS,EAAC;QAAW;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAChCrF,OAAA;UAAMgF,SAAS,EAAC,qBAAqB;UAAAC,QAAA,EAAC;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAEV;EAEA,oBACErF,OAAA;IAAKgF,SAAS,EAAE,GAAG3C,MAAM,+CAAgD;IAAA4C,QAAA,gBACvEjF,OAAA;MACEuF,GAAG,EAAEzE,QAAS;MACd0E,QAAQ;MACRC,WAAW;MACXC,KAAK;MACLV,SAAS,EAAC;IAA4B;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACvC,CAAC,eAEFrF,OAAA;MAAKgF,SAAS,EAAC,sDAAsD;MAAAC,QAAA,eACnEjF,OAAA;QAAKgF,SAAS,EAAC;MAAgF;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnG,CAAC,eAENrF,OAAA;MACEsF,OAAO,EAAEkB,YAAa;MACtBxB,SAAS,EAAC,8GAA8G;MAAAC,QAAA,eAExHjF,OAAA,CAACL,CAAC;QAACqF,SAAS,EAAC;MAAS;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnB,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV,CAAC;AAACiB,GAAA,CAtFWD,eAAe;AAAAI,GAAA,GAAfJ,eAAe;AAwF5B,eAAelG,SAAS;AAAC,IAAA4F,EAAA,EAAAK,GAAA,EAAAK,GAAA;AAAAC,YAAA,CAAAX,EAAA;AAAAW,YAAA,CAAAN,GAAA;AAAAM,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}